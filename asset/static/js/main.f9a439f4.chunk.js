(this.webpackJsonpmss=this.webpackJsonpmss||[]).push([[0],{250:function(e,t,n){},251:function(e,t,n){},440:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(12),o=n.n(i),r=(n(250),n(251),n(252),n(227)),l=n(16),s=n(22),d=n(5),j=n(9),u=n(505),b=n(502),p=n(14),m=n(481),O=n(508),f=n(509),h=n(484),x=n(223),v=n.n(x),g=n(1),y=Object(m.a)((function(e){return{speedDial:{position:"fixed",bottom:e.spacing(5),right:e.spacing(5)}}})),C=[{icon:Object(g.jsx)(v.a,{}),name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0432\u043e\u0434\u043d\u0443\u044e"}],S=function(e){var t=e.setAddOpen,n=y(),c=Object(a.useState)(!1),i=Object(j.a)(c,2),o=i[0],r=i[1],l=function(){r(!1),t()};return Object(g.jsx)("div",{className:n.root,children:Object(g.jsx)(O.a,{ariaLabel:"SpeedAdd",className:n.speedDial,icon:Object(g.jsx)(f.a,{}),onClose:function(){r(!1)},onOpen:function(){r(!0)},open:o,children:C.map((function(e){return Object(g.jsx)(h.a,{icon:e.icon,tooltipTitle:e.name,onClick:l},e.name)}))})})},k=n(158),w=n.n(k),E=n(58),N=n.n(E),D=n(68),I=n(447),P=n(450),R=n(82),T=n.n(R),W=n(42),F=n.n(W),L=n(130),M=n.n(L),z=n(56),U=n.n(z),A=n(490),q=n(507),B=n(489),Y=n(487),V=n(488),H=n(486),K=function(e){var t=e.open,n=e.close,a=e.confirm,c=e.header,i=e.message;return Object(g.jsxs)(q.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(g.jsx)(H.a,{id:"alert-dialog-title",children:c}),Object(g.jsx)(Y.a,{children:Object(g.jsx)(V.a,{id:"alert-dialog-description",children:i})}),Object(g.jsxs)(B.a,{children:[Object(g.jsx)(A.a,{onClick:n,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(g.jsx)(A.a,{onClick:a,color:"primary",autoFocus:!0,children:"\u0414\u0430"})]})]})},Z=n(504),J=n(491),_=Object(m.a)((function(e){return{formControl:{minWidth:160,margin:"10px 0 5px 0"},timeforms:{margin:"10px 5px 0 -5px"},selectEmpty:{marginTop:e.spacing(2)},textField:{width:"200px"}}})),G=function(e){var t=e.open,n=e.save,c=e.data,i=e.close,o=_(),r=Object(a.useState)(null),l=Object(j.a)(r,2),s=l[0],u=l[1];if(Object(a.useEffect)((function(){t&&u({id:c.id,inputTime:c.date,title:c.label,comments:c.comments})}),[t]),!s||!t)return null;var b=function(){i()};return Object(g.jsx)("div",{children:Object(g.jsx)(q.a,{open:t,onClose:b,maxWidth:"sm",fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,children:Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u(null),n(s)},children:[Object(g.jsx)(H.a,{style:{padding:"16px 24px 0 24px"},id:"form-dialog-title",children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u0432\u043e\u0434\u043d\u0443\u044e"}),Object(g.jsxs)(Y.a,{children:[Object(g.jsx)(J.a,{className:o.formControl,fullWidth:!0,children:Object(g.jsx)(Z.a,{required:!0,fullWidth:!0,id:"standard-basic",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",defaultValue:null===s||void 0===s?void 0:s.title,onChange:function(e){u((function(t){return Object(d.a)(Object(d.a)({},t),{},{title:e.target.value})}))}})}),Object(g.jsx)("p",{}),Object(g.jsx)(Z.a,{required:!0,id:"datetime-local",label:"\u0412\u0440\u0435\u043c\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f",type:"datetime-local",defaultValue:s.inputTime,className:o.textField,InputLabelProps:{shrink:!0},onChange:function(e){u(Object(d.a)(Object(d.a)({},s),{},{inputTime:e.currentTarget.value}))}}),Object(g.jsx)(J.a,{className:o.formControl,fullWidth:!0,children:Object(g.jsx)(Z.a,{InputLabelProps:{shrink:!0},fullWidth:!0,id:"outlined-multiline-static",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",multiline:!0,rows:2,variant:"outlined",defaultValue:s.comments,onChange:function(e){u(Object(d.a)(Object(d.a)({},s),{},{comments:e.currentTarget.value}))}})})]}),Object(g.jsxs)(B.a,{children:[Object(g.jsx)(A.a,{onClick:b,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(g.jsx)(A.a,{type:"submit",color:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})})},X=n(496),Q=n(506),$=n(492),ee=n(495),te=n(446),ne=n(225),ae=[{id:"1",title:"\u041e\u0421\u0421",comments:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0432\u044f\u0437\u0438",responsible:{person:"\u041a\u043e\u0442\u0435\u043d\u043a\u043e \u041a.\u0412.",telephone:"\u0410\u0422\u0421-\u041e\u0413\u0412: (0812) 30-60"},order:1},{id:"2",title:"\u0421\u0418\u041e",comments:"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435",responsible:{person:"\u0412\u0440\u0430\u0447\u0435\u0432 \u0414.\u0421., \u041c\u0430\u043b\u044b\u0448\u0435\u0432 \u0412.\u042e.",telephone:"\u0410\u0422\u0421-\u041e\u0413\u0412: (0812) 30-82"},order:2},{id:"3",title:"\u0418\u0411",comments:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c",responsible:{person:"\u0417\u0438\u043d\u043e\u0432\u044c\u0435\u0432 \u0414.\u041d",telephone:"\u0410\u0422\u0421-\u041e\u0413\u0412 (0812) 23-08"},order:3},{id:"4",title:"\u0422\u041e\u0431",comments:"\u0422\u0435\u0440\u0440\u0438\u0442\u043e\u0440\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u043e\u0431\u043e\u0440\u043e\u043d\u0430",responsible:{person:"\u0428\u0430\u043f\u043e\u0432\u0430\u043b\u043e\u0432 \u0413.\u041d.",telephone:"\u0410\u0422\u0421-\u041e\u0413\u0412 (0812) 30-37"},order:3},{id:"5",title:"\u041a\u041e",comments:"\u041a\u0430\u0434\u0440\u043e\u0432\u043e\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435",responsible:{person:"\u0412\u0430\u0448\u043a\u0435\u0432\u0438\u0447 \u0421.\u0410.",telephone:"\u0410\u0422\u0421-\u041e\u0413\u0412 (0812) 30-41"},order:3},{id:"6",title:"\u041c\u041e",comments:"\u041c\u0435\u0434\u0438\u0446\u0438\u043d\u0441\u043a\u043e\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435",responsible:{person:"\u0411\u043b\u0443\u0434\u043e\u0432 \u0421.\u0412.",telephone:"\u0410\u0422\u0421-\u041e\u0413\u0412 (0812) "},order:3},{id:"7",title:"\u041c\u041f\u041e",comments:"\u041c\u043e\u0440\u0430\u043b\u044c\u043d\u043e-\u043f\u0441\u0438\u0445\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435",responsible:{person:"\u041b\u0438\u0442\u0432\u0438\u043d\u043e\u0432\u0430 \u041d.\u0412.",telephone:"\u0410\u0422\u0421-\u041e\u0413\u0412 (0812) "},order:3},{id:"8",title:"\u041c\u0422\u041e",comments:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044c\u043d\u043e-\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435",responsible:{person:"\u041d\u0438\u0434\u0435\u043d\u0441 \u041b.\u0412.",telephone:"\u0410\u0422\u0421-\u041e\u0413\u0412 (0812) 30-37"},order:3}],ce=Object(m.a)((function(e){return{formControl:{minWidth:160,margin:"10px 0 5px 0"},textField:{width:"200px"}}})),ie=function(e){var t=e.first,n=e.setSubEvents,a=e.eventData,c=e.index,i=ce();return Object(g.jsxs)("div",{className:"event-type-details",children:[c+1,Object(g.jsx)(I.a,{className:"add-subevent-button",color:"primary","aria-label":"upload picture",component:"span",onClick:t?function(){n((function(e){return[].concat(Object(s.a)(e),[{id:Object(u.a)(),type:0,tlfReport:!1,shtReport:!1,comments:"",deadline:""}])}))}:function(){n((function(e){return e.filter((function(e){return e.id!==a.id}))}))},children:t?Object(g.jsx)(U.a,{}):Object(g.jsx)(F.a,{})}),Object(g.jsxs)(J.a,{className:i.formControl,fullWidth:!0,children:[Object(g.jsx)($.a,{htmlFor:"age-native-helper",children:"\u0422\u0438\u043f \u0432\u0432\u043e\u0434\u043d\u043e\u0439"}),Object(g.jsxs)(ne.a,{value:null,required:!0,onChange:function(e){var t=e.target.value;n((function(e){return e.map((function(e){return e.id===a.id?Object(d.a)(Object(d.a)({},e),{},{type:t}):e}))}))},children:[Object(g.jsx)("option",{"aria-label":"None",value:""}),ae.map((function(e){return Object(g.jsxs)("option",{value:e.id,children:[" ",e.title," - ",e.comments]},e.id)}))]})]}),Object(g.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(g.jsx)("span",{style:{paddingRight:"20px"},children:Object(g.jsx)(Z.a,{required:!0,id:"datetime-local",label:"Deadline",type:"datetime-local",InputLabelProps:{shrink:!0},onChange:function(e){var t=e.currentTarget.value;n((function(e){return e.map((function(e){return e.id===a.id?Object(d.a)(Object(d.a)({},e),{},{deadline:t}):e}))}))}})}),Object(g.jsxs)(J.a,{component:"fieldset",children:[Object(g.jsx)(te.a,{component:"legend",children:"\u0414\u043e\u043a\u043b\u0430\u0434"}),Object(g.jsxs)(ee.a,{"aria-label":"position",row:!0,children:[Object(g.jsx)(X.a,{value:"top",control:Object(g.jsx)(Q.a,{color:"secondary",checked:a.tlfReport,onChange:function(e){var t=e.target.checked;n((function(e){return e.map((function(e){return e.id===a.id?Object(d.a)(Object(d.a)({},e),{},{tlfReport:t}):e}))}))}}),label:"\u041f\u0422\u0421",labelPlacement:"end"}),Object(g.jsx)(X.a,{value:"start",control:Object(g.jsx)(Q.a,{color:"secondary",checked:a.shtReport,onChange:function(e){var t=e.target.checked;n((function(e){return e.map((function(e){return e.id===a.id?Object(d.a)(Object(d.a)({},e),{},{shtReport:t}):e}))}))}}),label:"\u0428\u0422",labelPlacement:"end"})]})]}),Object(g.jsx)(J.a,{className:i.formControl,fullWidth:!0,children:Object(g.jsx)(Z.a,{InputLabelProps:{shrink:!0},fullWidth:!0,id:"outlined-multiline-static",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",multiline:!0,rows:1,variant:"outlined",onChange:function(e){var t=e.target.value;n((function(e){return e.map((function(e){return e.id===a.id?Object(d.a)(Object(d.a)({},e),{},{comments:t}):e}))}))}})})]})]})},oe=Object(m.a)((function(e){return{formControl:{minWidth:160,margin:"10px 0 5px 0"},timeforms:{margin:"10px 5px 0 -5px"},selectEmpty:{marginTop:e.spacing(2)},textField:{width:"200px"}}})),re=function(e){var t=e.open,n=e.save,c=e.inId,i=e.close,o=(oe(),Object(a.useState)(null)),r=Object(j.a)(o,2),l=r[0],s=r[1];Object(a.useEffect)((function(){s([{id:Object(u.a)(),type:0,tlfReport:!1,shtReport:!1,comments:"",deadline:""}])}),[]);var d=function(){s([{id:Object(u.a)(),type:0,tlfReport:!1,shtReport:!1,comments:"",deadline:""}]),i()};return Object(a.useEffect)((function(){}),[]),l?Object(g.jsx)("div",{children:Object(g.jsx)(q.a,{open:t,onClose:d,maxWidth:"sm",fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,children:Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s([{id:Object(u.a)(),type:0,tlfReport:!1,shtReport:!1,comments:"",deadline:""}]),n({inId:c,subEvents:l})},children:[Object(g.jsx)(H.a,{style:{padding:"16px 24px 0 24px"},id:"form-dialog-title",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}),Object(g.jsx)(Y.a,{children:l.map((function(e,t){return Object(g.jsx)(ie,{eventData:e,setSubEvents:s,first:0===t,index:t},e.id)}))}),Object(g.jsxs)(B.a,{children:[Object(g.jsx)(A.a,{onClick:d,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(g.jsx)(A.a,{type:"submit",color:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}):null},le=function(e){var t=e.data,n=Object(a.useState)(!1),c=Object(j.a)(n,2),i=c[0],o=c[1],r=Object(a.useState)(!1),l=Object(j.a)(r,2),s=l[0],d=l[1],u=Object(a.useState)(!1),b=Object(j.a)(u,2),m=b[0],O=b[1],f=Object(a.useState)(!1),h=Object(j.a)(f,2),x=h[0],v=h[1];return Object(g.jsxs)("div",{className:"input-box-event",onPointerEnter:function(){o(!0)},onPointerLeave:function(){o(!1)},children:[Object(g.jsx)(K,{open:s,close:function(){return d(!1)},confirm:function(){o(!1),d(!1),t.handleMainDel(t)},header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435",message:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0412\u0421\u042e \u0432\u0432\u043e\u0434\u043d\u0443\u044e? \u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u042d\u0442\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430. \u0411\u0443\u0434\u044c\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439."}),Object(g.jsx)(G,{open:m,close:function(){return O(!1)},save:function(e){O(!1),t.handleInUpdate(e)},data:t}),Object(g.jsx)(re,{open:x,inId:t.id,close:function(){return v(!1)},save:function(e){t.handleAddChain(e),v(!1)}}),Object(g.jsx)("span",{className:"date",children:N()(new Date(t.date)).format("DD.MM.YYYY HH:mm")}),Object(g.jsx)(D.a,{variant:"h6",children:t.label.length>10?Object(g.jsx)(a.Fragment,{children:t.label.slice(0,9)+"..."}):t.label}),i&&Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(P.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",arrow:!0,placement:"top",children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){v(!0),o(!1)},className:"add-btn",children:Object(g.jsx)(U.a,{})})}),Object(g.jsx)(P.a,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",arrow:!0,placement:"top",children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){O(!0),o(!1)},className:"update-btn",children:Object(g.jsx)(M.a,{})})}),Object(g.jsx)(P.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0432\u043e\u0434\u043d\u0443\u044e",arrow:!0,placement:"top",children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){d(!0),setTimeout((function(){o(!1)}),150)},className:"del-btn",children:Object(g.jsx)(F.a,{})})})]}),Object(g.jsx)("span",{className:"service-wrap",children:t.comments&&Object(g.jsx)(P.a,{title:t.comments,children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){},size:"small",className:"info-btn",children:Object(g.jsx)(T.a,{fontSize:"inherit"})})})}),Object(g.jsx)(p.a,{type:"source",position:"right",id:"a",style:{background:"#555"}})]})},se=Object(a.memo)(le),de=function(e){var t=e.data,n=Object(a.useState)(!1),c=Object(j.a)(n,2),i=c[0],o=c[1],r=Object(a.useState)(!1),l=Object(j.a)(r,2),s=l[0],d=l[1];return Object(g.jsxs)("div",{className:t.complete?"out-box-event done":"out-box-event",onPointerEnter:function(){o(!0)},onPointerLeave:function(){o(!1)},children:[Object(g.jsx)(K,{open:s,close:function(){return d(!1)},confirm:function(){d(!1),t.handleChainDel(t)},header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435",message:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0446\u0435\u043f\u043e\u0447\u043a\u0443 \u0441\u043e\u0431\u044b\u0442\u0438\u0439? \u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u042d\u0442\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430. \u0411\u0443\u0434\u044c\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439."}),i&&Object(g.jsx)(P.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0446\u0435\u043f\u043e\u0447\u043a\u0443",arrow:!0,placement:"right",children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){d(!0),o(!1)},className:"del-btn",children:Object(g.jsx)(F.a,{})})}),Object(g.jsx)(D.a,{variant:"h6",className:"animate__shakeX",children:t.label}),Object(g.jsx)(p.a,{type:"target",position:"left",style:{background:"#555"}})]})},je=Object(a.memo)(de),ue=n(131),be=n.n(ue),pe=n(132),me=n.n(pe),Oe=n(497),fe=Object(m.a)((function(e){return{formControl:{minWidth:160,margin:"10px 0 5px 0"},timeforms:{margin:"10px 5px 0 -5px"},selectEmpty:{marginTop:e.spacing(2)},textField:{width:"200px"}}})),he=function(e){var t=e.open,n=e.save,c=e.data,i=e.close,o=fe(),r=Object(a.useState)(null),l=Object(j.a)(r,2),s=l[0],u=l[1];if(Object(a.useEffect)((function(){t&&u({id:c.id,type:c.type,deadline:c.deadline,comments:c.comments,complete:c.complete})}),[t]),!s||!t)return null;var b=function(){i()};return Object(g.jsx)("div",{children:Object(g.jsx)(q.a,{open:t,onClose:b,maxWidth:"sm",fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,children:Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u(null),n(s)},children:[Object(g.jsx)(H.a,{style:{padding:"16px 24px 0 24px"},id:"form-dialog-title",children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u0432\u043e\u0434\u043d\u0443\u044e"}),Object(g.jsxs)(Y.a,{children:[Object(g.jsxs)(J.a,{className:o.formControl,fullWidth:!0,children:[Object(g.jsx)($.a,{htmlFor:"age-native-helper",children:"\u0422\u0438\u043f \u0432\u0432\u043e\u0434\u043d\u043e\u0439"}),Object(g.jsxs)(ne.a,{value:s.type,required:!0,onChange:function(e){var t=e.target.value;u((function(e){return Object(d.a)(Object(d.a)({},e),{},{type:t})}))},children:[Object(g.jsx)("option",{"aria-label":"None",value:""}),ae.map((function(e){return Object(g.jsxs)("option",{value:e.id,children:[" ",e.title," - ",e.comments]},e.id)}))]})]}),Object(g.jsx)("p",{}),Object(g.jsx)("span",{style:{paddingRight:"20px"},children:Object(g.jsx)(Z.a,{required:!0,id:"datetime-local",label:"Deadline",type:"datetime-local",defaultValue:s.deadline,InputLabelProps:{shrink:!0},onChange:function(e){u(Object(d.a)(Object(d.a)({},s),{},{deadline:e.currentTarget.value}))}})}),Object(g.jsxs)(J.a,{component:"fieldset",children:[Object(g.jsx)(te.a,{component:"legend",children:"\u041e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e"}),Object(g.jsx)(ee.a,{"aria-label":"position",row:!0,children:Object(g.jsx)(X.a,{value:"top",control:Object(g.jsx)(Oe.a,{checked:s.complete,onChange:function(e){u((function(e){return Object(d.a)(Object(d.a)({},e),{},{complete:!e.complete})}))}}),labelPlacement:"end"})})]}),Object(g.jsx)(J.a,{className:o.formControl,fullWidth:!0,children:Object(g.jsx)(Z.a,{InputLabelProps:{shrink:!0},fullWidth:!0,id:"outlined-multiline-static",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",multiline:!0,rows:2,variant:"outlined",defaultValue:s.comments,onChange:function(e){u(Object(d.a)(Object(d.a)({},s),{},{comments:e.currentTarget.value}))}})})]}),Object(g.jsxs)(B.a,{children:[Object(g.jsx)(A.a,{onClick:b,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(g.jsx)(A.a,{type:"submit",color:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})})},xe=Object(m.a)((function(){return{formControl:{minWidth:160,margin:"10px 0 5px 0"},textField:{width:"200px"}}})),ve=function(e){var t=e.first,n=e.setEvents,a=e.eventData,c=e.index,i=xe();return Object(g.jsxs)("div",{className:"event-type-details",children:[c+1,Object(g.jsx)(I.a,{className:"add-subevent-button",color:"primary","aria-label":"upload picture",component:"span",onClick:t?function(){n((function(e){return[].concat(Object(s.a)(e),[{id:Object(u.a)(),type:0,tlfReport:!1,shtReport:!1,comments:"",deadline:""}])}))}:function(){n((function(e){return e.filter((function(e){return e.id!==a.id}))}))},children:t?Object(g.jsx)(U.a,{}):Object(g.jsx)(F.a,{})}),Object(g.jsx)(J.a,{className:i.formControl,fullWidth:!0,children:Object(g.jsx)(Z.a,{required:!0,fullWidth:!0,id:"standard-basic",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",defaultValue:a.title,onChange:function(e){var t=e.target.value;n((function(e){return e.map((function(e){return e.id===a.id?Object(d.a)(Object(d.a)({},e),{},{title:t}):e}))}))}})}),Object(g.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(g.jsx)("span",{style:{paddingRight:"20px"},children:Object(g.jsx)(Z.a,{id:"datetime-local",label:"Deadline",type:"datetime-local",InputLabelProps:{shrink:!0},onChange:function(e){var t=e.currentTarget.value;n((function(e){return e.map((function(e){return e.id===a.id?Object(d.a)(Object(d.a)({},e),{},{deadline:t}):e}))}))}})}),Object(g.jsxs)(J.a,{component:"fieldset",children:[Object(g.jsx)(te.a,{component:"legend",children:"\u0414\u043e\u043a\u043b\u0430\u0434"}),Object(g.jsxs)(ee.a,{"aria-label":"position",row:!0,children:[Object(g.jsx)(X.a,{value:"top",control:Object(g.jsx)(Q.a,{color:"secondary",checked:a.tlfReport,onChange:function(e){var t=e.target.checked;n((function(e){return e.map((function(e){return e.id===a.id?Object(d.a)(Object(d.a)({},e),{},{tlfReport:t}):e}))}))}}),label:"\u041f\u0422\u0421",labelPlacement:"end"}),Object(g.jsx)(X.a,{value:"start",control:Object(g.jsx)(Q.a,{color:"secondary",checked:a.shtReport,onChange:function(e){var t=e.target.checked;n((function(e){return e.map((function(e){return e.id===a.id?Object(d.a)(Object(d.a)({},e),{},{shtReport:t}):e}))}))}}),label:"\u0428\u0422",labelPlacement:"end"})]})]}),Object(g.jsx)(J.a,{className:i.formControl,fullWidth:!0,children:Object(g.jsx)(Z.a,{InputLabelProps:{shrink:!0},fullWidth:!0,id:"outlined-multiline-static",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",multiline:!0,rows:1,variant:"outlined",onChange:function(e){var t=e.target.value;n((function(e){return e.map((function(e){return e.id===a.id?Object(d.a)(Object(d.a)({},e),{},{comments:t}):e}))}))}})})]})]})},ge=function(e){var t=e.open,n=e.save,c=e.close,i=Object(a.useState)(null),o=Object(j.a)(i,2),r=o[0],l=o[1],s=Object(a.useState)(!0),d=Object(j.a)(s,2),b=d[0],p=d[1];Object(a.useEffect)((function(){l([{id:Object(u.a)(),title:"",tlfReport:!1,shtReport:!1,comments:"",deadline:""}])}),[]);var m=function(){l([{id:Object(u.a)(),title:"",tlfReport:!1,shtReport:!1,comments:"",deadline:""}]),c()};return Object(a.useEffect)((function(){}),[]),r?Object(g.jsx)("div",{children:Object(g.jsx)(q.a,{open:t,onClose:m,maxWidth:"sm",fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,children:Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l([{id:Object(u.a)(),title:"",tlfReport:!1,shtReport:!1,comments:"",deadline:""}]),n({events:r,direction:b}),c()},children:[Object(g.jsxs)(H.a,{style:{padding:"16px 24px 0 24px"},id:"form-dialog-title",children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u044f",Object(g.jsx)(X.a,{value:"start",control:Object(g.jsx)(Oe.a,{color:"primary",checked:b,onChange:function(){return p((function(e){return!e}))}}),label:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c: \u0434\u043e",labelPlacement:"start"}),Object(g.jsx)("span",{style:{paddingLeft:"10px",fontSize:"16px"},children:"\u043f\u043e\u0441\u043b\u0435"})]}),Object(g.jsx)(Y.a,{children:r.map((function(e,t){return Object(g.jsx)(ve,{eventData:e,setEvents:l,first:0===t,index:t},e.id)}))}),Object(g.jsxs)(B.a,{children:[Object(g.jsx)(A.a,{onClick:m,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(g.jsx)(A.a,{type:"submit",color:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}):null},ye=function(e){var t=e.data,n=Object(a.useState)(ae.reduce((function(e,t){return e[t.id]=t,e}),{})),c=Object(j.a)(n,1)[0],i=Object(a.useState)(!1),o=Object(j.a)(i,2),r=o[0],l=o[1],s=Object(a.useState)(!1),d=Object(j.a)(s,2),u=d[0],b=d[1],m=Object(a.useState)(!1),O=Object(j.a)(m,2),f=O[0],h=O[1],x=Object(a.useState)(!1),v=Object(j.a)(x,2),y=v[0],C=v[1],S=Object(a.useState)(!1),k=Object(j.a)(S,2),w=k[0],E=k[1],R=Object(a.useState)(!1),W=Object(j.a)(R,2),F=W[0],L=W[1];if(Object(a.useEffect)((function(){E(z(t.deadline)),setTimeout((function(){E(z(t.deadline))}),6e4)})),!c||!t)return null;var z=function(e){var t=N()(new Date(e)),n=new N.a,a=N.a.duration(t.diff(n)),c=a.asMilliseconds();L(c<66e4);var i=parseInt(a.asHours()),o=parseInt(a.asMinutes())%60;return i?"".concat(i," \u0447 ").concat(o," \u043c\u0438\u043d"):"".concat(o," \u043c\u0438\u043d")},A=function(){b(!1),t.handleDone(t)};return Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(ge,{open:f,save:function(e){var n=e.events,a=e.direction;h(!1),t.handleEventAdd({parent:{source:t.id,inId:t.inId,outId:t.outId,direction:a},uEvents:n})},close:function(){return h(!1)}}),Object(g.jsx)(K,{open:u,close:function(){return b(!1)},confirm:A,header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",message:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u043e\u0435?"}),Object(g.jsx)(he,{open:y,close:function(){return C(!1)},save:function(e){C(!1),t.handleMainUpdate(e)},data:t}),Object(g.jsxs)("div",{className:t.complete?"main-box-wrap done":"main-box-wrap",onPointerEnter:function(){l(!0)},onPointerLeave:function(){l(!1)},children:[Object(g.jsx)(p.a,{type:"target",position:"left"}),!0!==t.complete&&Object(g.jsx)("span",{className:"date",children:N()(new Date(t.deadline)).format("DD.MM.YYYY HH:mm")}),t.complete&&Object(g.jsx)(P.a,{title:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f",arrow:!0,placement:"bottom",children:Object(g.jsx)("span",{className:"date-complete",children:t.completeTime.slice(0,-3)})}),r&&Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(P.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",arrow:!0,placement:"top",children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){h(!0)},className:"add-btn",children:Object(g.jsx)(U.a,{})})}),Object(g.jsx)(P.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",arrow:!0,placement:"top",children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){C(!0)},className:"update-btn",children:Object(g.jsx)(M.a,{})})}),!0!==t.complete&&Object(g.jsx)(P.a,{title:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438",arrow:!0,placement:"top",children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:A,className:"done-btn",children:Object(g.jsx)(be.a,{})})})]}),(r||F)&&!0!==t.complete&&Object(g.jsx)("div",{className:F?"timer alert":"timer",children:w}),Object(g.jsx)(D.a,{variant:"h6",children:c[t.type].title}),Object(g.jsxs)("span",{className:"service-wrap",children:[t.inTime&&Object(g.jsx)(P.a,{title:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d - ".concat(t.inTime),arrow:!0,children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){},size:"small",className:"time-btn",children:Object(g.jsx)(me.a,{fontSize:"inherit"})})}),t.comments&&Object(g.jsx)(P.a,{title:t.comments,arrow:!0,children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){},size:"small",className:"info-btn",children:Object(g.jsx)(T.a,{fontSize:"inherit"})})})]}),Object(g.jsx)(p.a,{type:"source",position:"right",id:"a",style:{background:"#555"}})]})]})},Ce=Object(a.memo)(ye),Se=n(226),ke=n.n(Se),we=function(e){var t=e.data,n=Object(a.useState)(!1),c=Object(j.a)(n,2),i=c[0],o=c[1],r=Object(a.useState)(!1),l=Object(j.a)(r,2),s=l[0],d=l[1],u=Object(a.useState)(!1),b=Object(j.a)(u,2),m=b[0],O=b[1],f=Object(a.useState)(!1),h=Object(j.a)(f,2),x=(h[0],h[1],function(){d(!1),t.handleSimpleEventDone(t.id)});return Object(g.jsxs)("div",{className:t.complete?"event-box-wrap done":"event-box-wrap",onPointerEnter:function(){o(!0)},onPointerLeave:function(){o(!1)},children:[Object(g.jsx)(K,{open:s,close:function(){return d(!1)},confirm:x,header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",message:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u043e\u0435?"}),Object(g.jsx)(K,{open:m,close:function(){return O(!1)},confirm:function(){O(!1),t.handleSimpleEventDel(t.id)},header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435",message:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435? \u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u042d\u0442\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430. \u0411\u0443\u0434\u044c\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439."}),Object(g.jsx)(p.a,{type:"target",position:"left"}),t.complete&&Object(g.jsx)(P.a,{title:"\u0412\u0440\u0435\u043c\u044f \u0434\u043e\u043a\u043b\u0430\u0434\u0430",arrow:!0,placement:"bottom",children:Object(g.jsx)("span",{className:"date-complete",children:t.completeTime.slice(0,-3)})}),Object(g.jsx)(D.a,{variant:"h6",children:t.label}),i&&Object(g.jsxs)(a.Fragment,{children:[!0!==t.complete&&Object(g.jsx)(P.a,{title:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438",arrow:!0,placement:"left",children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:x,className:"done-btn",children:Object(g.jsx)(be.a,{})})}),t.complete&&Object(g.jsx)(P.a,{title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",arrow:!0,placement:"left",children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){t.handleUndoDone(t.id)},className:"done-btn",children:Object(g.jsx)(ke.a,{})})}),Object(g.jsx)(P.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",arrow:!0,placement:"right",children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){O(!0),o(!1)},className:"del-btn",children:Object(g.jsx)(F.a,{})})})]}),Object(g.jsxs)("span",{className:"service-wrap",children:[t.inTime&&Object(g.jsx)(P.a,{title:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d - ".concat(t.inTime),arrow:!0,children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){},size:"small",className:"time-btn",children:Object(g.jsx)(me.a,{fontSize:"inherit"})})}),t.comments&&Object(g.jsx)(P.a,{title:t.comments,children:Object(g.jsx)(I.a,{"aria-label":"info",onClick:function(){},size:"small",className:"info-btn",children:Object(g.jsx)(T.a,{fontSize:"inherit"})})})]}),Object(g.jsx)(p.a,{type:"source",position:"right",id:"a",style:{background:"#555"}})]})},Ee={input:se,mainEvent:Ce,event:Object(a.memo)(we),output:je},Ne=new w.a.graphlib.Graph;Ne.setDefaultEdgeLabel((function(){return{}}));var De=function(e){var t=e.events,n=e.newone,c=e.colorUpdate,i=e.newEdge,o=Object(a.useState)([]),r=Object(j.a)(o,2),l=r[0],s=r[1],d=Object(a.useCallback)((function(e){var t=function(e){return Ne.setGraph({rankdir:"LR"}),e.forEach((function(e){Object(p.f)(e)?Ne.setNode(e.id,{width:200,height:76}):Ne.setEdge(e.source,e.target)})),w.a.layout(Ne),e.map((function(e){if(Object(p.f)(e)){var t=Ne.node(e.id);e.targetPosition="left",e.sourcePosition="right",e.position={x:t.x-100+Math.random()/1e3,y:t.y-38}}return e}))}(e);s(t)}),[l]);Object(a.useEffect)((function(){d(t)}),[n,c]);return Object(g.jsx)("div",{className:"event-chain",children:Object(g.jsx)(p.b,{style:{background:"#fff",width:"100%",height:"100%"},nodeTypes:Ee,elements:l,connectionLineType:"smoothstep",onConnect:function(e){var t=e.source,n=e.target;i(t,n)},zoomIn:!1})})},Ie=Object(m.a)((function(e){return{formControl:{minWidth:160,margin:"10px 0 5px 0"},timeforms:{margin:"10px 5px 0 -5px"},selectEmpty:{marginTop:e.spacing(2)},textField:{width:"200px"}}})),Pe=function(e){var t=e.open,n=e.save,c=e.close,i=Ie(),o=Object(a.useState)(null),r=Object(j.a)(o,2),l=r[0],s=r[1],b=Object(a.useState)(null),p=Object(j.a)(b,2),m=p[0],O=p[1];Object(a.useEffect)((function(){O([{id:Object(u.a)(),type:0,tlfReport:!1,shtReport:!1,comments:"",deadline:""}])}),[]);var f=function(){O([{id:Object(u.a)(),type:0,tlfReport:!1,shtReport:!1,comments:"",deadline:""}]),c()};return Object(a.useEffect)((function(){var e=new Date;e.setTime(e.getTime()-60*e.getTimezoneOffset()*1e3);var t=e.toISOString().slice(0,16);s({startDate:t})}),[]),l?Object(g.jsx)("div",{children:Object(g.jsx)(q.a,{open:t,onClose:f,maxWidth:"sm",fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,children:Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O([{id:Object(u.a)(),type:0,tlfReport:!1,shtReport:!1,comments:"",deadline:""}]),n({main:l,subEvents:m})},children:[Object(g.jsx)(H.a,{style:{padding:"16px 24px 0 24px"},id:"form-dialog-title",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0432\u043e\u0434\u043d\u0443\u044e"}),Object(g.jsxs)(Y.a,{children:[Object(g.jsx)(J.a,{className:i.formControl,fullWidth:!0,children:Object(g.jsx)(Z.a,{required:!0,fullWidth:!0,id:"standard-basic",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(e){s((function(t){return Object(d.a)(Object(d.a)({},t),{},{title:e.target.value})}))}})}),Object(g.jsx)("p",{}),Object(g.jsx)(Z.a,{required:!0,id:"datetime-local",label:"\u0412\u0440\u0435\u043c\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f",type:"datetime-local",defaultValue:l.startDate,className:i.textField,InputLabelProps:{shrink:!0},onChange:function(e){s(Object(d.a)(Object(d.a)({},l),{},{inputTime:e.currentTarget.value}))}}),m.map((function(e,t){return Object(g.jsx)(ie,{eventData:e,setSubEvents:O,first:0===t,index:t},e.id)})),Object(g.jsx)(J.a,{className:i.formControl,fullWidth:!0,children:Object(g.jsx)(Z.a,{InputLabelProps:{shrink:!0},fullWidth:!0,id:"outlined-multiline-static",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",multiline:!0,rows:2,variant:"outlined",onChange:function(e){s(Object(d.a)(Object(d.a)({},l),{},{comments:e.currentTarget.value}))}})})]}),Object(g.jsxs)(B.a,{children:[Object(g.jsx)(A.a,{onClick:f,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(g.jsx)(A.a,{type:"submit",color:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}):null},Re=n(494),Te=n(498),We=n(501),Fe=n(500),Le=n(499),Me=function(){return Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(D.a,{variant:"h5",gutterBottom:!0,children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),ae&&Object(g.jsx)(Re.a,{children:ae.map((function(e){return Object(g.jsxs)(a.Fragment,{children:[Object(g.jsxs)(Te.a,{alignItems:"flex-start",children:[Object(g.jsx)(Le.a,{className:"info-title",children:e.title}),Object(g.jsx)(Fe.a,{primary:e.comments,secondary:Object(g.jsxs)(c.a.Fragment,{children:[Object(g.jsxs)(D.a,{component:"span",variant:"body2",color:"textPrimary",className:"info-person",children:["\u041e\u0442\u0432. ",Object(g.jsx)("strong",{children:e.responsible.person})]}),Object(g.jsx)("br",{}),e.responsible.telephone]})})]}),Object(g.jsx)(We.a,{variant:"inset",component:"li"})]},e.id)}))})]})},ze=Object(a.memo)(Me),Ue=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),o=Object(j.a)(i,2),r=o[0],l=o[1],m=Object(a.useState)(!1),O=Object(j.a)(m,2),f=O[0],h=O[1],x=Object(a.useState)(!1),v=Object(j.a)(x,2),y=v[0],C=v[1];Object(a.useEffect)((function(){var e=localStorage.getItem("chain");if(e){var t=JSON.parse(e).map((function(e){return Object(p.f)(e)?Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{handleEventAdd:T,handleDone:w,handleChainDel:W,handleInUpdate:I,handleAddChain:R,handleMainDel:F,handleMainUpdate:P,handleSimpleEventDone:N,handleSimpleEventDel:D,handleUndoDone:E})}):e}));l(t)}}),[]),Object(a.useEffect)((function(){localStorage.setItem("chain",JSON.stringify(r))}),[r]),Object(a.useEffect)((function(){var e=r.filter((function(e){return"output"===e.type})).reduce((function(e,t){var n=t.data.relativePool,a=t.id;return r.filter((function(e){return Object(p.f)(e)&&n.includes(e.id)&&e.id!==a})).filter((function(e){return!0!==e.data.complete})).length?e.unComleted.push(t.id):e.completed.push(t.id),e}),{completed:[],unComleted:[]});l((function(t){return t.map((function(t){return e.completed.includes(t.id)?Object(d.a)(Object(d.a)({},t),{},{data:Object(d.a)(Object(d.a)({},t.data),{},{complete:!0,label:"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043e"})}):e.unComleted.includes(t.id)?Object(d.a)(Object(d.a)({},t),{},{data:Object(d.a)(Object(d.a)({},t.data),{},{complete:!1,label:"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"})}):t}))})),C((function(e){return e+1}))}),[f]);var k=function(e,t){var n="straight",a={x:0,y:0},c=(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Moscow"}),i=e.reduce((function(e,i){var o=[],r="e".concat(i.id);e.push({id:r,source:t,target:i.id,type:n,animated:!0}),o.push(r);var l=Object(u.a)(),s={id:l,type:"output",className:"output-event",data:{label:"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",complete:!1,inId:t,outId:l,handleChainDel:W},style:{backgroundColor:"red",color:"#fff"},draggable:!1,position:a};if(o.push(l),i.shtReport){var j=Object(u.a)();e.push({id:"sht".concat(i.id),source:j,target:s.id,type:n,animated:!0}),o.push("sht".concat(i.id)),e.push({id:j,type:"event",className:"simple-event",data:{id:j,label:"\u041f\u0422\u0421",complete:!1,inTime:c,inId:t,outId:l,handleEventAdd:T,handleSimpleEventDone:N,handleSimpleEventDel:D,handleUndoDone:E},position:a,style:{backgroundColor:"red",color:"#fff"},draggable:!1}),o.push(j),e.push({id:"tosht".concat(i.id),source:i.id,target:j,type:n,animated:!0,label:"\u0414\u043e\u043a\u043b\u0430\u0434",labelStyle:{fill:"red",fontWeight:700,fontSize:"12px"}}),o.push("tosht".concat(i.id))}if(i.tlfReport){var b=Object(u.a)();e.push({id:"tlf".concat(i.id),source:b,target:s.id,type:n,animated:!0}),o.push("tlf".concat(i.id)),e.push({id:b,type:"event",className:"simple-event",data:{id:b,label:"\u0428\u0422",complete:!1,inTime:c,inId:t,outId:l,handleEventAdd:T,handleSimpleEventDone:N,handleSimpleEventDel:D,handleUndoDone:E},position:a,style:{backgroundColor:"red",color:"#fff"},draggable:!1}),o.push(b),e.push({id:"totlf".concat(i.id),source:i.id,target:b,type:n,animated:!0,label:"\u0414\u043e\u043a\u043b\u0430\u0434",labelStyle:{fill:"red",fontWeight:700,fontSize:"12px"}}),o.push("totlf".concat(i.id))}return i.shtReport||i.tlfReport||(e.push({id:"mtoend".concat(i.id),source:i.id,target:s.id,type:n,animated:!0}),o.push("mtoend".concat(i.id))),e.push({id:i.id,type:"mainEvent",className:"main-event",data:{id:i.id,complete:!1,inTime:c,inId:t,outId:l,handleEventAdd:T,handleDone:w,handleMainUpdate:P,type:i.type,deadline:i.deadline,comdments:i.comments},style:{backgroundColor:"red",color:"#fff"},position:a,draggable:!1}),o.push(i.id),e.push(Object(d.a)(Object(d.a)({},s),{},{data:Object(d.a)(Object(d.a)({},s.data),{},{relativePool:o,mainIn:t,mainEdgeId:r})})),e}),[]);return{elementsPool:i,childsPool:i.map((function(e){return e.id}))}},w=function(e){l((function(t){return t.map((function(t){return Object(p.f)(t)&&t.id===e.id?Object(d.a)(Object(d.a)({},t),{},{data:Object(d.a)(Object(d.a)({},t.data),{},{complete:!0,completeTime:(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Moscow"})})}):t}))})),h((function(e){return e+1}))},E=function(e){l((function(t){return t.map((function(t){return t.id===e?Object(d.a)(Object(d.a)({},t),{},{data:Object(d.a)(Object(d.a)({},t.data),{},{complete:!1,completeTime:!1})}):t}))})),h((function(e){return e+1}))},N=function(e){l((function(t){return t.map((function(t){return t.id===e?Object(d.a)(Object(d.a)({},t),{},{data:Object(d.a)(Object(d.a)({},t.data),{},{complete:!0,completeTime:(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Moscow"})})}):t}))})),h((function(e){return e+1}))},D=function(e){l((function(t){var n=t.filter((function(t){return t.id===e}));return Object(p.g)(n,t)})),h((function(e){return e+1}))},I=function(e){l((function(t){return t.map((function(t){return t.id===e.id?Object(d.a)(Object(d.a)({},t),{},{data:Object(d.a)(Object(d.a)({},t.data),{},{label:e.title,comments:e.comments,date:e.inputTime})}):t}))})),h((function(e){return e+1}))},P=function(e){var t=!1;e.complete&&(t=(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Moscow"})),l((function(n){return n.map((function(n){return n.id===e.id?Object(d.a)(Object(d.a)({},n),{},{data:Object(d.a)(Object(d.a)({},n.data),{},{type:e.type,deadline:e.deadline,complete:e.complete,completeTime:t,comments:e.comments})}):n}))})),h((function(e){return e+1}))},R=function(e){var t=e.subEvents,n=e.inId,a=k(t,n),c=a.elementsPool,i=a.childsPool;l((function(e){var t=e.map((function(e){return e.id===n?Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{childsPool:[].concat(Object(s.a)(e.data.childsPool),Object(s.a)(i))})}):e}));return[].concat(Object(s.a)(t),Object(s.a)(c))})),h((function(e){return e+1}))},T=function(e){var t=e.parent,n=e.uEvents,a=r.filter((function(e){return e.id===t.source}))[0],c=(Object(p.d)(a,r),Object(p.c)(a,r),"straight");(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Moscow"}),n.reduce((function(e,n){var a="e".concat(n.id);if(t.direction?e.push({id:a,source:t.source,target:n.id,type:c,animated:!0}):e.push({id:a,source:n.id,target:t.source,type:c,animated:!0}),n.shtReport){var i=Object(u.a)();e.push({id:"sht".concat(n.id),source:i,target:"2222",type:c,animated:!0})}n.tlfReport;n.id,n.title,t.inId,t.outId;return e}),[])},W=function(e){var t=e.relativePool,n=e.mainIn,a=e.mainEdgeId,c=!1;l((function(e){var i=e.filter((function(e){return!t.includes(e.id)})),o=i.filter((function(t){return!Object(p.f)(t)||t.id!==n||(Object(p.d)(t,e).length>1?(c=!0,!0):(c=!0,!1))}));return c?o.filter((function(e){return!Object(p.e)(e)||e.id!==a})):i})),h((function(e){return e+1}))},F=function(e){var t=e.id,n=e.childsPool;l((function(e){return e.filter((function(e){return!n.includes(e.id)&&e.id!==t}))})),h((function(e){return e+1}))};return Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(K,{}),Object(g.jsxs)("div",{className:"main-wrap",children:[Object(g.jsxs)(b.a,{container:!0,style:{height:"inherit"},children:[Object(g.jsx)(b.a,{item:!0,xs:12,sm:9,children:Object(g.jsx)("div",{className:"flow-wrap",children:r.length?Object(g.jsx)(De,{events:r,newone:f,colorUpdate:y,newEdge:function(e,t){var n="u_"+(Math.random().toString(36).substring(2,4)+Math.random().toString(36).substring(2,4))+"_"+e,a=[{id:n,source:e,target:t,type:"straight",animated:!0,labelStyle:{fill:"red",fontWeight:700,fontSize:"12px"}}],c=r.filter((function(t){return t.id===e}))[0].data.inId,i=r.filter((function(e){return e.id===t}))[0].data.outId;l((function(e){var t=e.map((function(e){return Object(p.f)(e)&&e.id===c?Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{childsPool:[].concat(Object(s.a)(e.data.childsPool),[n])})}):e})).map((function(e){return Object(p.f)(e)&&e.id===i?Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{relativePool:[].concat(Object(s.a)(e.data.relativePool),[n])})}):e}));return[].concat(Object(s.a)(t),a)})),h((function(e){return e+1}))}}):null})}),Object(g.jsx)(b.a,{item:!0,xs:12,sm:3,children:Object(g.jsx)("div",{className:"info-wrap",children:Object(g.jsx)(ze,{})})})]}),Object(g.jsx)(Pe,{open:n,close:function(){return c(!1)},save:function(e){c(!1);var t=e.main,n=Object(u.a)(),a={id:n,type:"input",data:{id:n,inId:n,label:t.title,comments:t.comments,date:t.startDate,handleMainDel:F,handleInUpdate:I,handleAddChain:R},draggable:!1,position:{x:0,y:0},className:"inputEvent"},i=e.subEvents,o=k(i,n),r=o.elementsPool,j=o.childsPool,b=[Object(d.a)(Object(d.a)({},a),{},{data:Object(d.a)(Object(d.a)({},a.data),{},{childsPool:j})})].concat(Object(s.a)(r));l((function(e){return[].concat(Object(s.a)(e),Object(s.a)(b))})),h((function(e){return e+1}))}}),Object(g.jsx)(S,{setAddOpen:function(){return c(!0)}})]})]})},Ae=function(){return Object(g.jsx)(a.Fragment,{children:Object(g.jsx)(Ue,{})})},qe=n(503),Be=n(159),Ye=n.n(Be),Ve=n(493),He=Object(m.a)((function(e){return{popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)}}})),Ke=function(e){var t,n,i,o=c.a.useState(null),r=Object(j.a)(o,2),l=r[0],s=r[1],d=He(),u=function(e){s(e.currentTarget)},b=function(){s(null)},p=Boolean(l),m=function(t){var n=t.open;return Object(g.jsx)(Ve.a,{id:"mouse-over-popover",className:d.popover,classes:{paper:d.paper},open:n,anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:b,disableRestoreFocus:!0,children:Object(g.jsx)(D.a,{children:e.poper&&e.poper})})};switch(e.size){case"small":t=40,n=40,i="h6";break;case"medium":t=60,n=60,i="h5";break;case"large":t=100,n=100,i="h4";break;default:t=60,n=60,i="h5"}return"page"===e.type?Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(m,{open:p}),Object(g.jsxs)(qe.a,{style:{transform:"translate(-50%, -50%)"},position:"absolute",top:"50%",left:"50%",textAlign:"center",children:[e.image&&Object(g.jsx)(qe.a,{clone:!0,mb:e.title||e.description?2:0,width:"".concat(t,"%"),height:"".concat(n,"%"),children:e.image}),e.title&&Object(g.jsx)(qe.a,{mb:!e.description&&e.button?2:0,children:Object(g.jsx)(D.a,{variant:i,children:e.title})}),e.description&&Object(g.jsx)(qe.a,{mb:e.button&&2,children:Object(g.jsx)(D.a,{variant:"body1",children:e.description})}),Object(g.jsx)(Ye.a,{onMouseEnter:u,onMouseLeave:b}),e.button&&e.button]})]}):"card"===e.type?Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(m,{open:p}),Object(g.jsxs)(qe.a,{padding:e.padding,textAlign:"center",children:[e.image&&Object(g.jsx)(qe.a,{clone:!0,mb:e.title||e.description?2:0,width:"".concat(t,"%"),height:"".concat(n,"%"),children:e.image}),e.title&&Object(g.jsx)(qe.a,{mb:!e.description&&e.button?2:0,children:Object(g.jsx)(D.a,{variant:i,children:e.title})}),e.description&&Object(g.jsx)(qe.a,{mb:e.button&&2,children:Object(g.jsx)(D.a,{variant:"body1",children:e.description})}),Object(g.jsx)(Ye.a,{onMouseEnter:u,onMouseLeave:b}),e.button&&e.button]})]}):null},Ze=function(){return Object(g.jsx)("span",{children:"\u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"})};Ke.defaultProps={title:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",poper:Object(g.jsx)(Ze,{}),type:"page",size:"medium",padding:2};var Je=Ke,_e=function(){return Object(g.jsx)(a.Fragment,{children:Object(g.jsx)(Je,{title:"404 \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430",description:"\u0412\u044b \u0437\u0430\u0431\u043b\u0443\u0434\u0438\u043b\u0438\u0441\u044c. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0430\u0434\u0440\u0435\u0441",poper:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0443 \u0430\u0434\u0440\u0435\u0441\u0430 \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435. \u0422\u0430\u043a\u043e\u0433\u043e \u0430\u0434\u0440\u0435\u0441\u0430 \u043d\u0435\u0442 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435."})})},Ge=function(){return Object(g.jsx)(r.a,{children:Object(g.jsxs)(l.c,{children:[Object(g.jsx)(l.a,{path:"/",exact:!0,component:Ae}),Object(g.jsx)(l.a,{component:_e})]})})},Xe=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(Ge,{})})},Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,511)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),i(e),o(e)}))};o.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(Xe,{})}),document.getElementById("root")),Qe()}},[[440,1,2]]]);
//# sourceMappingURL=main.f9a439f4.chunk.js.map